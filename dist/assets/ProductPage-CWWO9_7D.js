import{h as e,r as t,j as a,q as s,s as o,t as i,v as c,A as n,w as l,S as r,x as d,B as u,C as p}from"./vendor-Dv1Rd94t.js";import{a as g,b as h,S as m}from"./index-BxeSiO34.js";import{C as x}from"./CardProduct-yQjXhJ5V.js";import"./ui-C9JqUebO.js";import"jquery";import"./getConfigAuth-BUruOnyX.js";const f={VITE_API_URL_PROD:"https://www.everchic.ec/api/v1"},C=()=>{var C,j;const{products:v,collections:y,categories:P,loading:b,fetchProducts:S,fetchCategories:T,fetchCollections:B,fetchProductsByCategory:I,fetchProductsByCollection:E,fetchProductsByTags:w}=(()=>{const{VITE_API_URL_PROD:a}=f,s=a,o="/products",i=e(),[c,n]=t.useState([]),[l,r]=t.useState([]),[d,u]=t.useState([]),[p,m]=t.useState(!1),[x,C]=t.useState(null),j=e=>{C(e.message||"Ocurrió un error inesperado")};return{products:c,collections:l,categories:d,loading:p,error:x,fetchProducts:t.useCallback(((e,t)=>{m(!0),g.get(`${s+o}?page=${e}&limit=${t}`).then((e=>{n(e.data||[]),localStorage.setItem("everchic_stored_products",JSON.stringify(e.data.products)),i(h(e.data.products))})).catch(j).finally((()=>m(!1)))}),[s,o,i]),fetchCollections:t.useCallback((()=>{g.get(`${s}/collections`).then((e=>r(e.data||[]))).catch(j)}),[s]),fetchCategories:t.useCallback((()=>{g.get(`${s}/categories`).then((e=>u(e.data||[]))).catch(j)}),[s]),fetchProductsByCollection:t.useCallback(((e,t,a)=>{m(!0),g.get(`${s+o}/searchProductByCollection`,{params:{page:e,limit:t,collectionId:a}}).then((e=>{n(e.data||[]),i(h(e.data.products))})).catch(j).finally((()=>m(!1)))}),[s,o,i]),fetchProductsByCategory:t.useCallback(((e,t,a)=>{m(!0),g.get(`${s+o}/searchProductByCategory`,{params:{page:e,limit:t,categoryId:a}}).then((e=>{n(e.data||[]),i(h(e.data.products))})).catch(j).finally((()=>m(!1)))}),[s,o,i]),fetchProductsByTags:t.useCallback(((e,t,a)=>{m(!0),g.get(`${s+o}/searchProductsByTags`,{params:{page:e,limit:t,tag:a}}).then((e=>{n(e.data||[]),i(h(e.data.products))})).catch(j).finally((()=>m(!1)))}),[s,o,i])}})(),[$,_]=t.useState({currentPage:1,totalPages:0}),[k,D]=t.useState(0),[O,A]=t.useState(""),[L,R]=t.useState(null),[W,q]=t.useState(null),[U,z]=t.useState(O);t.useEffect((()=>{S(1,24),T(),B()}),[T,B,S]),t.useEffect((()=>{(null==v?void 0:v.total)&&(null==v?void 0:v.totalPages)&&_({currentPage:(null==v?void 0:v.currentPage)||1,totalPages:(null==v?void 0:v.totalPages)||0})}),[v]);t.useEffect((()=>{const e=setTimeout((()=>{z(O)}),1e3);return()=>{clearTimeout(e)}}),[O]),t.useEffect((()=>{N(1,U||"",L,W)}),[U,L,W]);const N=(e,t,a,s)=>{t?w(e,24,t):a?I(e,24,a):s?E(e,24,s):S(e,24)};return a.jsxs(a.Fragment,{children:[a.jsx(m,{title:"EverChic - Productos | Calcetines de Diseño",description:"Explora nuestra colección de calcetines únicos. Encuentra calcetines de personajes de series animadas, tejidos o sublimados. Más de 500 modelos disponibles.",keywords:"calcetines, calcetines de diseño, calcetines de personajes, calcetines sublimados, calcetines tejidos, moda, accesorios, compras online",ogTitle:"EverChic - Colección de Calcetines de Diseño",ogDescription:"Descubre nuestra exclusiva colección de calcetines con personajes de series animadas",ogImage:"https://everchic.com/images/products-og.jpg",ogUrl:"https://everchic.com/productos"}),a.jsxs(s,{sx:{minHeight:"100vh",maxWidth:"1260px",margin:"auto",marginTop:"60px",padding:"10px",paddingTop:"30px",display:"flex",flexDirection:"column","@media (min-width:600px)":{marginTop:"150px"}},children:[a.jsxs(s,{sx:{paddingBottom:"15px",maxWidth:"500px"},children:[a.jsxs(o,{value:k,style:{paddingBottom:"15px"},onChange:(e,t)=>{D(t)},variant:"fullWidth",children:[a.jsx(i,{label:"Buscar"}),a.jsx(i,{label:"Categoría"}),a.jsx(i,{label:"Colección"})]}),0===k&&a.jsx(c,{id:"filter-search",sx:{marginTop:"15px"},label:"Escriba aquí alguna referencia o tag",variant:"outlined",fullWidth:!0,value:O,onChange:e=>{const t=e.target.value;A(t)}}),1===k&&a.jsx(n,{id:"filter-category",options:P,getOptionLabel:e=>e.name||"",value:L?P.find((e=>e.id===L)):null,onChange:(e,t)=>{R((null==t?void 0:t.id)||null),N(1,O,null==t?void 0:t.id,W)},renderInput:e=>a.jsx(c,{...e,sx:{marginTop:"15px"},label:"Seleccione una categoría",variant:"outlined"})}),2===k&&a.jsx(n,{id:"filter-collection",options:y,getOptionLabel:e=>e.name||"",value:W?y.find((e=>e.id===W)):null,onChange:(e,t)=>{q((null==t?void 0:t.id)||null),N(1,O,L,null==t?void 0:t.id)},renderInput:e=>a.jsx(c,{...e,sx:{marginTop:"15px"},label:"Seleccione una colección",variant:"outlined"})})]}),a.jsx(s,{sx:{marginTop:"10px",padding:"5px",display:"grid",gap:"15px",gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))",placeItems:"center",justifyContent:"center","@media (min-width: 1200px)":{gridTemplateColumns:"repeat(6, 1fr)"}},children:null==(C=null==v?void 0:v.products)?void 0:C.map((e=>a.jsx(x,{product:e},e.id)))}),0===(null==(j=null==v?void 0:v.products)?void 0:j.length)&&a.jsx(l,{variant:"h6",color:"textSecondary",align:"center",children:"No hay productos disponibles"}),a.jsx(r,{spacing:2,direction:"row",justifyContent:"center",padding:3,children:a.jsx(d,{count:$.totalPages,page:$.currentPage,onChange:(e,t)=>{_((e=>({...e,currentPage:t}))),N(t,O,L,W)},variant:"outlined",shape:"rounded",siblingCount:1,boundaryCount:0})}),a.jsx(u,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:b,children:a.jsx(p,{color:"inherit"})})]})]})};export{C as default};
